!function(t){t.fn.jTPS=function(e){function s(){document.selection&&"undefined"!=typeof document.selection.empty?document.selection.empty():"function"==typeof window.getSelection&&"function"==typeof window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()}function a(e,l){t(">.nav .pagination",e).empty();for(var i=d>=n||0==d?0:Math.ceil(n/d);i--;)t(">.nav .pagination",e).prepend('<div class="pageSelector">'+(i+1)+"</div>");var o=t(">.nav:first .pageSelector",e).length;t(">.nav",e).each(function(){t(".hidePageSelector",this).removeClass("hidePageSelector"),t(".hilightPageSelector",this).removeClass("hilightPageSelector"),t(".pageSelectorSeperator",this).remove(),t(".pageSelector:lt("+(l>o-4?o-5:l-2)+"):not(:first)",this).addClass("hidePageSelector").eq(0).after('<div class="pageSelectorSeperator">'+t(e).data("tableSettings").perPageSeperator+"</div>"),t(".pageSelector:gt("+(4>l?4:l)+"):not(:last)",this).addClass("hidePageSelector").eq(0).after('<div class="pageSelectorSeperator">'+t(e).data("tableSettings").perPageSeperator+"</div>"),t(".pageSelector:eq("+(l-1)+")",this).addClass("hilightPageSelector")}),d>=n?t(">.nav .paginationTitle",e).css("display","none"):t(">.nav .paginationTitle",e).css("display",""),t(">.nav .pagination .pageSelector",e).each(function(){t(".stubCell").remove(),t(this).bind("click",function(){if(t(this).hasClass("hilightPageSelector")){if(t(this).parent().queue().length>0){t(this).parent().stop().queue("fx",[]).stop();var e=(parseInt(t(this).html())-1)*d,l=e+d;t(">tbody> tr",r).removeClass("hideTR").addClass("hideTR"),t(">tbody>tr:gt("+(e-2)+"):lt("+d+")",r).andSelf().removeClass("hideTR");var i=t(">tbody>tr:not(.hideTR):first",r).prevAll().length,o=t(">tbody>tr:not(.hideTR):not(.stubCell)",r).length;t(">.nav .status",r).html("Mostrando "+(i+1)+" - "+(i+o)+" de "+numerodefilas)}return s(),!1}t(this).addClass("hilightPageSelector"),t(this).parent().stop().queue("fx",[]).stop().dequeue();var e=t(">tbody>tr:not(.hideTR):first",r).prevAll().length,l=(parseInt(t(this).html())-1)*d;l>n&&(l=n-1);var h=t(r).data("tableSettings").scrollStep*Math.ceil(Math.abs((l-e)/d));h>d&&(h=d);for(var c=Math.ceil(Math.abs(e-l)/h);c--;)t(this).parent().animate({opacity:1},t(r).data("tableSettings").scrollDelay,function(){if(0==t(this).queue("fx").length&&(h=Math.abs(e-l)%h||h),e>l){t(">tbody>tr:not(.hideTR):first",r).prevAll(":lt("+h+")").removeClass("hideTR"),t(">tbody>tr:not(.hideTR)",r).length>d&&t(">tbody>tr:not(.hideTR):last",r).prevAll(":lt("+(h-1)+")").andSelf().addClass("hideTR");var s=t(">tbody>tr:not(.hideTR)",r).length;d>s&&t(">tbody>tr:not(.hideTR):last",r).nextAll(":lt("+(d-s)+")").removeClass("hideTR")}else{var a=t(">tbody>tr:not(.hideTR):last",r);t(">tbody>tr:not(.hideTR):lt("+h+")",r).addClass("hideTR"),t(a).nextAll(":lt("+h+")").removeClass("hideTR")}var i=t(">tbody>tr:not(.hideTR):first",r).prevAll().length,o=t(">tbody>tr:not(.hideTR):not(.stubCell)",r).length;t(">.nav .status",r).html("Mostrando "+(i+1)+" - "+(i+o)+" de "+numerodefilas)});a(r,parseInt(t(this).html())),t(r).data("tableSettings").clickCallback()})})}function l(e,s,a){var l=t(">thead th,>thead th",e).get(s),r=t(l).hasClass("sortAsc")||t(l).hasClass("sortDesc")||!1,i=String.fromCharCode(0),o=t(">tbody>tr:not(.stubCell)",e).get(),n=[];t(o).each(function(e,a){n.push(t(">td:eq("+s+")",a).text()+i+n.length)}),r||(n.sort(function(t,e){var s=/(-?[0-9\.]+)/g,a=String.fromCharCode(0),l=t.toString().toLowerCase().split(a)[0]||"",r=e.toString().toLowerCase().split(a)[0]||"",i=l.replace(s,a+"$1"+a).split(a),o=r.replace(s,a+"$1"+a).split(a),d=new Date(l).getTime(),n=d?new Date(r).getTime():null;if(n){if(n>d)return-1;if(d>n)return 1}for(var h=0,c=Math.max(i.length,o.length);c>h;h++){if(oFxNcL=parseFloat(i[h])||i[h],oFyNcL=parseFloat(o[h])||o[h],oFxNcL<oFyNcL)return-1;if(oFxNcL>oFyNcL)return 1}return 0}),a||n.reverse()),t(">tbody",e).addClass("jtpstemp").before("<tbody></tbody>");var h=n.length,c=t(">tbody",e)[0];if(r)for(;h--;)c.appendChild(o[h]);else for(;h--;)c.appendChild(o[parseInt(n[h].split(i).pop())]);t(">tbody.jtpstemp",e).remove();for(var g=0,p=t(">thead>tr:last th",e).length,f=d-t(">tbody>tr",e).length%d,b=t(">tbody>tr:first>td:first",e).css("height");f>g&&f!=d;g++)t(">tbody>tr:last",e).after('<tr class="stubCell"><td colspan="'+p+'" style="height: '+b+';">&nbsp;</td></tr>')}t(this).data("tableSettings",t.extend({perPages:[8,16,32,64,"ALL"],perPageText:"",perPageDelim:'<span style="color:#ccc;">|</span>',perPageSeperator:"..",scrollDelay:30,scrollStep:2,fixedLayout:!1,clickCallback:function(){}},e));var r=t(this),i=i||1,o=t(this).data("tableSettings").perPages,d=d||o[0],n=t(">tbody",this).find("tr").length;if(t(this).addClass("jTPS"),t(this).data("tableSettings").fixedLayout&&"fixed"!=t(this).css("table-layout")){var h=0;t(">thead",this).find("th,td").each(function(){t(this).css("width",t(this).width())});for(var c=t(">tbody",this)[0].childNodes,g=0,p=c.length;p>g;g++)"TR"==c[g].nodeName&&(h=Math.max(h,c[g].offsetHeight));for(var g=0,p=c.length;p>g;g++)if("TR"==c[g].nodeName)for(var f=0,b=c[g].childNodes,u=b.length;u>f;f++)"TD"==b[f].nodeName&&(b[f].style.height=h+"px",f=u);t(this).css("table-layout","fixed")}t(".stubCell",this).remove();for(var v=0,y=Math.max(t(">thead:first tr:last th,>thead:first tr:last td",this).length,parseInt(t(">thead:first tr:last th,>thead:first tr:last td").attr("colspan")||0)),C=d-t(">tbody>tr",this).length%d,m=t(">tbody>tr:first>td:first",this).css("height");C>v&&C!=d;v++)t(">tbody>tr:last",this).after('<tr class="stubCell"><td colspan="'+y+'" style="height: '+m+';">&nbsp;</td></tr>');n>d&&0!=d&&t(">tbody>tr:gt("+(d-1)+")",this).addClass("hideTR"),0!=d&&t(">thead [sort],>thead .sort",this).each(function(e){t(this).addClass("sortableHeader").unbind("click").bind("click",function(){var e=t(">thead tr:last",r).children().index(t(this)),a=t(">thead [sort],>thead .sort",r).eq(e).hasClass("sortAsc")?!0:!1;l(r,e,a);var i=parseInt(t(".hilightPageSelector:first",r).html())||1;t(">tbody>tr",r).removeClass("hideTR").filter(":gt("+(d-1)*i+")").addClass("hideTR"),t(">tbody>tr:lt("+(d-1)*(i-1)+")",r).addClass("hideTR"),t(".pageSelector",r).index(t(".hilightPageSelector",r))>0&&t(".pageSelector:first",r).click(),t(">thead .sortDesc,>thead .sortAsc",r).removeClass("sortDesc").removeClass("sortAsc"),t(">thead [sort],>thead .sort",r).eq(e).addClass(a?"sortDesc":"sortAsc"),t(">tbody>tr>td.sortedColumn",r).removeClass("sortedColumn"),t(">tbody>tr:not(.stubCell)",r).each(function(){t(">td:eq("+e+")",this).addClass("sortedColumn")}),s(),t(r).data("tableSettings").clickCallback()})}),t(">.nav .selectPerPage",this).empty(),a(this,i||1),t(">.nav .selectPerPage",this).prepend(t(this).data("tableSettings").perPageText).find(".perPageSelector").each(function(){(parseInt(t(this).html())||n)==d&&t(this).addClass("perPageSelected"),t(this).bind("mouseover mouseout",function(e){"mouseover"==e.type?t(this).addClass("perPageHilight"):t(this).removeClass("perPageHilight")}),t(this).bind("click",function(){d=parseInt(t(this).html())||n,d>n&&(d=n),t(".stubCell",this).remove();for(var e=0,l=t(">thead th,>thead td",r).length,o=d-t(">tbody>tr",r).length%d,h=t(">tbody>tr:first>td:first",r).css("height");o>e&&o!=d;e++)t(">tbody>tr:last",r).after('<tr class="stubCell"><td colspan="'+l+'" style="height: '+h+';">&nbsp;</td></tr>');t(">tbody>tr",r).removeClass("hideTR").filter(":gt("+(d-1)*i+")").addClass("hideTR"),t(">tbody>tr:lt("+(d-1)*(i-1)+")",r).addClass("hideTR"),t(".pageSelector:first",r).click(),t(this).siblings(".perPageSelected").removeClass("perPageSelected"),t(this).addClass("perPageSelected"),a(r,1);var c=t(">tbody>tr:not(.hideTR):first",r).prevAll().length,g=t(">tbody>tr:not(.hideTR):not(.stubCell)",r).length;t(">.nav .status",r).html("Mostrando "+(c+1)+" - "+(c+g)+" de "+numerodefilas),s(),t(r).data("tableSettings").clickCallback()})});var S=t(">tbody>tr:not(.hideTR):first",this).prevAll().length,T=t(">tbody>tr:not(.hideTR):not(.stubCell)",this).length;return t(">.nav .status",this).html("Mostrando "+(S+1)+" - "+(S+T)+" de "+numerodefilas),this}}(jQuery);